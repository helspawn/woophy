function ToolTip(n,t){jQuery("#"+n.replace("#","")).each(function(){function f(){window.clearTimeout(i),r.fadeIn(200)}var i,u=jQuery(this),e=u.offset(),r=jQuery(document.createElement("div")).css({top:e.top+u.height()+"px",left:Math.max(0,e.left)+"px"}).attr("class","Tooltip").html(t).hide();u.mouseover(function(){window.clearTimeout(i),i=window.setTimeout(f,500)}).mouseout(function(){window.clearTimeout(i)}).click(function(){return f(),!1}),jQuery(document.body).append(r).click(function(){r.hide()})})}function PreviewThumb(){jQuery("#show_preview").click(function(){var t=jQuery("#preview_holder"),n;if(t.length){function i(){t.html('<div class="Error">Photo not found.</div>')}n=jQuery("input#photo_id").val();if(n&&n.length)if(!isNaN(parseInt(n))){t.html('<img src="'+Page.root_url+'images/loading_animated_white_small.gif" /><div>Please wait...</div>'),jQuery.get(Page.root_url+"services?method=woophy.photo.getUrl&photo_id="+n+"&size=medium",function(n){var r=jQuery("url",n).text();r.length?t.html('<img src="'+r+'">'):i()});return}i()}})}function SelectList(n){if(n){this.inputObj=n.inputObj,this.listItems=[],this.selectedItemIndex=-1,this.$holder=jQuery(document.createElement("div")).addClass("selectlist").attr("id","selectlist").css({position:"absolute",display:"none"}),this.mouseUpEvent=jQuery.proxy(this.hideList,this),this.keyDownEvent=jQuery.proxy(this.onKeyDownInput,this),this.keyUpEvent=jQuery.proxy(this.onKeyUpInput,this),this.setEnabled(!0);var t=this.$holder;jQuery(document).ready(function(){jQuery(document.body).append(t)})}}function BaseArchive(n){n&&(this.count_items=0,this.limit=0,this.offset=0,this.output_mode="xml",jQuery.extend(this,n),this.enablePageButtons(),jQuery(this.page_forward).click(jQuery.proxy(this.pageForward,this)),jQuery(this.page_backward).click(jQuery.proxy(this.pageBackward,this)),this.getArchive())}function MarkerTooltip(n){this.setValues(n)}function MapHome(n){function s(n,t){var i,r;if(f[n]==t)return;i=!0;if(t==undefined||t.length==0)f[n]&&delete f[n];else{i=!1;for(r in MapHome.historyKeys)if(MapHome.historyKeys[r]==n){f[n]=t+"",i=!0;break}}return clearTimeout(at),at=setTimeout(gt,10),i}function gt(){var t=[],n;for(n in f)f[n]!=undefined&&f[n].length>0&&t.push("&"+n+"="+f[n]);t.length>0&&(t=t.sort(),window.location.hash=t.join("")+tt)}function a(n,t){var f,r,c,h,i;if(u[n]==t)return;f=!0,r=!1;if(t==undefined||t.length==0)u[n]&&delete u[n];else{f=!1;for(c in MapHome.filterKeys)if(MapHome.filterKeys[c]==n){h=MapHome.filterKeys.SHOWALL;if(n==h){for(i in u)if(i!=h){r=!0;break}}else r=!0;u[n]=t,f=!0;break}}return o=r,i=e.urlencodeFilters(),s(MapHome.historyKeys.FILTERKEY,i.key),s(MapHome.historyKeys.FILTERVALUE,i.val),f}function ct(){o&&(u={},a(MapHome.filterKeys.SHOWALL,null),o=!1,st(null),s(MapHome.historyKeys.FILTERKEY,null),s(MapHome.historyKeys.FILTERVALUE,null))}function dt(){if(nt){b.bindTo("position",nt,"position");var t=e.urlencodeFilters(),r=t.key.length?[t.key]:[],i=t.val.length?[t.val]:[];r.push(MapHome.filterKeys.TOOLTIP),i.push(nt.u),g=!0,jQuery.get(n.service_url,{method:"woophy.map.getCities",key:r.join(","),val:i.join(","),output_mode:"json"},kt,"json")}}function kt(n){g&&(b.draw(n.length?n[0]:null),b.show(),clearTimeout(k),k=setTimeout(d,8e3),g=!1)}function d(){clearTimeout(rt),rt=null,clearTimeout(k),k=null,b.hide(),g=!1}function ii(){this.setIcon(w[this.i]),d(),rt=setTimeout(dt,750),nt=this}function ti(){this.a||this.setIcon(p[this.i]),d()}function st(n){c&&(c.a=!1,c.setIcon(p[c.i])),n?(n.a=!0,n.setIcon(w[n.i]),c=n,h=n.u,o||a(MapHome.filterKeys.SHOWALL,null),a(MapHome.filterKeys.CITYID,h)):(c=null,h=NaN)}function ni(){d(),st(this),jQuery(e).trigger(MapHome.events.MARKER_CLICK)}function ot(n){n=Math.max(1,n);var t=ut-1;while(l*Math.pow(t--,2)>=n);return Math.min(ut,Math.max(0,t+1))}function vt(n){var e,u,f,o;if(n==undefined)return;i=j=n.length,e=[];while(i--)u=n[i].u,e.push(u),t[u]==undefined?t[u]=pt(n[i].x,n[i].y,n[i].q,u,j-i):(t[u].setZIndex(j-i),f=ot(n[i].q),t[u].i!=f&&(t[u].i=f,t[u].setIcon(t[u].a?w[f]:p[f])));i=ft.length;while(i--){u=ft[i];if(jQuery.inArray(u,e)<0)if(t[u]){if(t[u].a){e.push(u);continue}j=t[u].e.length;while(j--)google.maps.event.removeListener(t[u].e[j]);t[u].setMap(null),delete t[u]}}if(l!=y&&n.length&&it){o=new google.maps.LatLngBounds;for(u in t)o.extend(t[u].position);r.fitBounds(o)}it=!0,ft=e.slice(0)}function pt(n,t,i,u,f){var o=ot(i),s=h==u,e=new google.maps.Marker({position:new google.maps.LatLng(t,n),map:r,icon:s?w[o]:p[o],shape:Map.markerShape});return e.e=[],e.u=u,e.i=o,e.a=s,s&&(c=e),e.setZIndex(f),e.e.push(google.maps.event.addListener(e,"mouseover",ii)),e.e.push(google.maps.event.addListener(e,"mouseout",ti)),e.e.push(google.maps.event.addListener(e,"click",ni)),e}function ht(n){l==y&&vt(n)}function et(){var u=r.getCenter();s(MapHome.historyKeys.LATITUDE,(u.lat()||0).toFixed(6)),s(MapHome.historyKeys.LONGITUDE,(u.lng()||0).toFixed(6)),s(MapHome.historyKeys.MAGNITUDE,r.zoom);if(l==y)if(r.zoom==r.minZoom)v||(v=!0,jQuery.get(n.service_url,{method:"woophy.map.getCitiesCache",zoomlevel:r.zoom,output_mode:"json"},ht,"json"));else{v=!1;var i=r.getBounds(),o=i.getSouthWest().lng(),h=i.getSouthWest().lat(),f=i.getNorthEast().lng(),e=i.getNorthEast().lat();jQuery.get(n.service_url,{method:"woophy.map.getCitiesByArea",x1:o,y1:h,x2:f,y2:e,zoomlevel:r.zoom,output_mode:"json"},ht,"json")}}function wt(){v=!1}function yt(n){l==lt&&(vt(n),jQuery(e).trigger(MapHome.events.GET_CITIES)),jQuery("body").scrollTop(0)}function bt(){var v,t,i,k,u;if(jQuery("#"+n.map_id).length>0){var d=2,c=30,y=0,s=[],f=[],o=window.location.hash,l,g=!1;if(o.length>1){o=o.substr(1),v=o.split("&"),u=v.length;while(u--){t=v[u].split("=");if(t.length==2)switch(t[0]){case MapHome.historyKeys.LATITUDE:c=parseFloat(t[1])||c,it=!1;break;case MapHome.historyKeys.LONGITUDE:y=parseFloat(t[1])||y;break;case MapHome.historyKeys.MAGNITUDE:d=parseInt(t[1])||1;break;case MapHome.historyKeys.FILTERKEY:s=t[1].split(",");break;case MapHome.historyKeys.FILTERVALUE:f=t[1].split(",")}else t.length==1&&t[0].length&&tt==""&&(tt="&"+t[0])}i=s.length;if(i&&i==f.length){l={};while(i--){switch(s[i]){case MapHome.filterKeys.SHOWALL:g=f[i]=="1"||f[i].toLowerCase()=="true";break;case MapHome.filterKeys.CITYID:h=f[i]}l[s[i]]=f[i]}}}e.googlemap=r=new google.maps.Map(document.getElementById(n.map_id),{zoom:d,center:new google.maps.LatLng(c,y),maxZoom:11,minZoom:1,mapTypeControl:!1,streetViewControl:!1,mapTypeControlOptions:{mapTypeIds:["Styled"]},mapTypeId:"Styled"}),k=new google.maps.StyledMapType(Map.style,{name:"Styled"}),r.mapTypes.set("Styled",k),u=ut;while(u--)p[u]=new google.maps.MarkerImage(n.marker_image_dir+"markerskin"+(u+1)+".png",Map.markerSize,Map.markerOrigin,Map.markerAnchor),w[u]=new google.maps.MarkerImage(n.marker_image_dir+"markerskin"+(u+1)+"_hover.png",Map.markerSize,Map.markerOrigin,Map.markerAnchor);b=new MarkerTooltip({map:r,zIndex:99999,element:document.getElementById(n.tooltip_id)}),google.maps.event.addListener(r,"idle",et),google.maps.event.addListener(r,"resize",wt),g?isNaN(h)||(a(MapHome.filterKeys.SHOWALL,"1"),a(MapHome.filterKeys.CITYID,h)):e.getCities(l)}}var r,e=this,t={},p=[],w=[],c,nt,h=NaN,rt,k,at,b,it=!0,o=!1,g=!1,v=!1,y=50,lt=1,l=y,ut=5,n=jQuery.extend({},n),ft=[],u={},f={},tt="";this.googlemap=null,this.getCities=function(t){var i;if(t!=undefined){ct();for(i in t)a(i,t[i]);o&&(l=lt,v=!1,i=e.urlencodeFilters(),jQuery.get(n.service_url,{method:"woophy.map.getCities",key:i.key,val:i.val,output_mode:"json"},yt,"json"))}else o&&(ct(),l=y,et(null))},this.getPhotos=function(n,t){o&&t()},this.getFilters=function(){return u},this.urlencodeFilters=function(){var t=[],i=[],n;for(n in u)t.push(encodeURIComponent(decodeURIComponent(n))),i.push(encodeURIComponent(decodeURIComponent(u[n])));return{key:t.join(","),val:i.join(",")}},google.maps.event.addDomListener(window,"load",bt)}function MapSideBar(n){function f(){window.top.location.href=n.base_url+"#&key="+MapHome.filterKeys.SHOWALL+","+MapHome.filterKeys.CITYID+"&val=0,"+n.city_id}function e(){window.top.location.href=n.blog_url+this.post_id}function i(t){return new google.maps.MarkerImage(n.marker_image_dir+t,Map.markerSize,Map.markerOrigin,Map.markerAnchor)}function u(r){var f,u,s;if(r&&r.length){var a=i("markerskin1.png"),v=i("markerskin3.png"),y=i("markerskin1_hover.png"),c=[],l=new google.maps.LatLngBounds,o=-1,h=r.length;while(++o<h)f=r[o],u=new google.maps.Marker({position:new google.maps.LatLng(f.y,f.x),map:t.googlemap,icon:a,cursor:"pointer",shape:Map.markerShape}),u.post_id=f.p,f.p==n.post_id?u.setIcon(y):o==h-1&&(u.setZIndex(9999),u.setIcon(v)),google.maps.event.addListener(u,"click",e),c.push(u.position),l.extend(u.position);s=new google.maps.Polyline({path:c,geodesic:!0,cursor:"default",strokeColor:"#FF9900",strokeOpacity:1,strokeWeight:1.5}),s.setMap(t.googlemap),t.googlemap.fitBounds(l)}}function r(){var c,s,e;if(jQuery("#"+n.map_id).length>0){var r=30,o=0,l=1,h=!1;n.latitude!=undefined&&n.longitude!=undefined&&(r=parseFloat(n.latitude)||r,o=parseFloat(n.longitude)||r,h=!0),t.googlemap=new google.maps.Map(document.getElementById(n.map_id),{zoom:l,center:new google.maps.LatLng(r,o),maxZoom:10,minZoom:1,disableDefaultUI:!0,draggable:!1,scrollwheel:!1,disableDoubleClickZoom:!0,mapTypeControlOptions:{mapTypeIds:["Styled"]},mapTypeId:"Styled"}),c=new google.maps.StyledMapType(Map.style,{name:"Styled"}),t.googlemap.mapTypes.set("Styled",c),h?(s=i("markerskin3_hover.png"),e=new google.maps.Marker({position:new google.maps.LatLng(r,o),map:t.googlemap,icon:s,cursor:"default",shape:Map.markerShape}),n.city_id!=undefined&&(e.setCursor("pointer"),google.maps.event.addListener(e,"click",f))):n.travelblog_id!=undefined&&jQuery.get(n.service_url,{method:"woophy.map.getCitiesByTravelBlogId",travelblog_id:n.travelblog_id,output_mode:"json"},u,"json")}}var t=this,n=jQuery.extend({},n);this.googlemap=null,jQuery(document).ready(r)}var init_global_pre=jQuery.Callbacks(),init_global_post=jQuery.Callbacks(),Page={title:"",page_context:"body",is_home:!1,root_url:"",lights:"on",$switchanchor:null,lightsout_class:"lightsout",show_footer:function(){jQuery("#FooterContainer").removeClass("nodisplay")},hide_footer:function(){jQuery("#FooterContainer").addClass("nodisplay")},init_login_window:function(){Utils.ajax_link(jQuery(".LoginButton")),jQuery(".LoginButton").colorbox({scrolling:!1,speed:100,onComplete:Page.on_open_login,width:459})},on_open_login:function(){jQuery("#CloseButton","#LoginForm").length==0&&jQuery('<div id="CloseButton" class="sprite replace">X</div>').prependTo("#colorbox #LoginForm").click(function(){jQuery.colorbox.close()}),Form.init(),Form.init_login(),Utils.ajax_link(jQuery(".ForgotPassword a")),jQuery(".ForgotPassword a").click(function(){return Page.show_loader("#cboxLoadedContent #LoginForm","white"),jQuery("#cboxLoadedContent").load(jQuery(this).attr("href")+" #MainContent",Page.on_open_forgot_password),!1})},on_open_forgot_password:function(){jQuery.colorbox.resize(),jQuery("#CloseButton","#ForgotPasswordForm").length==0&&jQuery('<div id="CloseButton" class="sprite replace">X</div>').prependTo("#colorbox #ForgotPasswordForm").click(function(){jQuery.colorbox.close()}),jQuery("a.BackToLogin").click(function(){return Page.show_loader("#cboxLoadedContent #ForgotPasswordForm","white"),jQuery("#cboxLoadedContent").load(jQuery(this).attr("href")+" #MainContent",Page.on_open_login),!1}),Form.props.frmForgotPassword={method:"post",callback:function(n){jQuery("#frmForgotPassword").remove(),jQuery("<p>"+n.message+"</p>").appendTo(".FormArea")}},Form.init(),Page.init()},check_popup_anchor:function(){var t=window.location.href,i=t.search(/&photo\-/i),n;i!=-1&&typeof PhotoPage=="object"&&typeof Gallery=="object"&&(Gallery.popup||(n=parseInt(t.substring(i+7)),isNaN(n)||(PhotoPage.photo_id=n,Gallery.get_photo_popup())))},show_loader:function(n,t){var i=jQuery(n).height()+"px";jQuery(n).html('<div style="text-align:center;width:100%;height:'+i+";line-height:"+i+';margin-auto;"><img style="vertical-align:middle;" src="'+Page.root_url+"images/loading_animated_"+t+'.gif"></div>')},init:function(){Page.init_login_window(),Page.check_popup_anchor()}},Form,WoophyMap,Search,Social,Images,Ads,Cookie,Utils,Map;init_global_pre.add(Page.init),Form={page_context:"body",text_input_default_value:[],props:[],clear_default_text_input_value:function(n){index=jQuery(n).index(this.page_context+" input[alt],"+this.page_context+" textarea[alt]"),n.value==Form.text_input_default_value[index]&&(jQuery(n).val(""),jQuery(n).attr("value",""))},restore_text_input_default_value:function(n){index=jQuery(n).index(this.page_context+" input[alt],"+this.page_context+" textarea[alt]"),n.value==""&&jQuery(n).val(Form.text_input_default_value[index])},clear_default_values:function(){$els=jQuery(this.page_context+" input[alt],"+this.page_context+" textarea[alt]"),$els.each(function(n,t){jQuery(t).val()==Form.text_input_default_value[n]&&jQuery(t).val()!=""&&jQuery(t).val("")})},add_password_label:function(n){$container=jQuery('<div class="PasswordContainer PositionRelative clearfix"></div>').appendTo(n),$input=jQuery("input",n).first(),$input.appendTo($container),$label=jQuery('<div class="PasswordLabel PositionAbsolute">Password</div>').appendTo($container),$input.val()!=""&&$label.hide(),$label.bind("click",function(){Form.hide_password_label($container)}),$input.bind("focus",function(){$label.hide()}),$input.bind("blur",function(){Form.show_password_label($container)})},replace_content:function(n,t){return $el=jQuery("input",n).first(),$el.val()==""||$el.val()==$el.attr("alt")?($new_el=jQuery('<input type="'+t+'" />').insertAfter($el),jQuery($el.get(0).attributes).each(function(){this.nodeName!="type"&&$new_el.attr(this.nodeName,this.nodeValue)}),$el.unbind().remove(),t=="password"&&$new_el.get(0).focus(),$new_el.val()==""&&t=="text"&&$new_el.val($new_el.attr("alt")),$new_el.bind("focus",function(){Form.replace_element($new_el.parent().get(0),"password")}),$new_el.bind("blur",function(){Form.replace_element($new_el.parent().get(0),"text")}),$new_el):void 0},hide_password_label:function(n){jQuery(".PasswordLabel",n).hide(),jQuery("input",n).focus()},show_password_label:function(n){jQuery("input",n).val()==""&&jQuery(".PasswordLabel",n).show()},do_quick_search:function(n){$input=jQuery("input#input",n),$dropdown=jQuery("select",n),$input.attr("name",$dropdown.val()),$input.val()!=$input.attr("alt")&&n.submit()},reset_form:function(){$form=jQuery(this).parent("form"),jQuery('input[type!="hidden"][type!="button"][type!="submit"], select, textarea',$form).each(function(){$this=jQuery(this),$this.is("select")?$this.prop("selectedIndex",0):$this.val("")}),$form.submit()},swap_submit:function(n){return $submit=jQuery('input[type="submit"]',n),$submit.length>0?($button=jQuery('<input type="button" />').attr("id",$submit.attr("id")).attr("class",$submit.attr("class")).attr("name",$submit.attr("name")).attr("value",$submit.attr("value")),$button.replaceAll($submit),$button):!1},init_login:function(){Form.props.frmLogin={method:"post",callback:function(n){n.redirect&&n.redirect!=""?window.location.href=n.redirect:window.location.reload()}}},init_add_folder:function(n){var t=jQuery("#FolderSelectContainer",n);jQuery('<div id="AddFolderButton" class="LightGreenButton">Add New Folder</div>').appendTo(t).bind("click",function(){Form.add_folder(this,t)})},add_folder:function(n,t){var i=t.parents(".InputArea"),r=jQuery(".AddFolderForm",i);r.length==0?(jQuery("div.Message",i).remove(),jQuery('<form class="AddFolderForm clearfix" method="get" action="'+Page.root_url+'account/photos/edit"><label for="folder_name">New folder name</label><input type="text" class="text sendable" name="folder_name"/><input type="hidden" name="output_mode" value="json" class="sendable" /><input type="submit" name="submit_addfolder" class="submit OrangeButton sendable" value="Save" /></form>').appendTo(i),jQuery(".AddFolderForm",i).bind("submit",function(){return Form.do_add_folder(this,t),!1}),jQuery(".AddFolderForm input.text",i).focus()):jQuery("input.text",r).focus()},do_add_folder:function(n,t){$this=jQuery(n),qs=this.concat_ajax_url($this),jQuery.get($this.attr("action")+qs,function(n){n=jQuery.parseJSON(n),n.error?jQuery('<div class="Error">'+n.error+"</div>").appendTo($this):n.message&&(jQuery('<div class="Message orange">'+n.message+"</div>").insertAfter($this),$this.remove(),$folder_dropdown=jQuery("#FolderDropdown select"),$folder_dropdown.length==0&&(jQuery(".Notice",t).remove(),$dropdown_container=jQuery('<div id="FolderDropdown" class="DropdownContainer"></div>').prependTo(t),$folder_dropdown=jQuery('<select name="folder_id" class="sprite"><option value="0" class="mainfolder">Main folder</option></select>').appendTo($dropdown_container)),$folder_dropdown.append('<option selected="true" value="'+n.folder_id+'">'+n.folder_name+"</option>").val(n.folder_id))})},submit_social_form:function(n,t){$this=jQuery(n),qs=this.concat_ajax_url($this),error=!1,jQuery.get($this.attr("action")+qs,function(n){$response=jQuery("rsp",n),$response.attr("stat")=="fail"?(error=!0,output='<span class="Error">'+jQuery("err",$response).attr("msg")+"</span>"):output="Your message has been sent!",jQuery(".feedback",$this).html(output),error||setTimeout(jQuery.proxy(Social.hide,Social,t),2e3)})},concat_ajax_url:function(n,t){var i=t?"&":"?";return jQuery(".sendable",n).each(function(){$el=jQuery(this),i+=$el.attr("name")+"="+encodeURIComponent($el.val())+"&"}),i},get_data_object:function(n){return data={},jQuery(".sendable",n).each(function(){$el=jQuery(this),data[$el.attr("name")]=$el.val()}),data},submit_xhr:function(n){var e=jQuery(n).attr("action"),f=jQuery(n).attr("id"),t=Form.props[f],u="POST",i,r;typeof t!="undefined"&&t.method!="undefined"&&(u=t.method),i=Form.get_data_object(n),jQuery(".ErrorRow, .Error").html(""),r=jQuery('<div class="Wait clearfix"><img src="'+Page.root_url+'images/loading_animated_white_small.gif" /><span>Please wait...</span></div>').appendTo("#"+f+" .SubmitRow"),jQuery.ajax({type:u,url:e,data:i,success:function(n){n.error_code?(jQuery(".ErrorRow, .Error").html(n.error_message),r.remove(),jQuery.colorbox.resize()):typeof t.callback=="function"&&t.callback(n)}})},init:function(){var n=0;Form.page_context=arguments.length>0?arguments[0]:"",Form.text_input_default_value=[],jQuery("form",this.page_context).each(function(){$form=jQuery(this),$form.unbind("submit"),$form.hasClass("xhr")&&(jQuery("input[name=xhr]",$form).length==0&&jQuery('<input type="hidden" class="sendable" name="xhr" value="true">').prependTo($form),jQuery("input[name=output_mode]",$form).length==0&&jQuery('<input type="hidden" class="sendable" name="output_mode" value="json">').prependTo($form),$form.bind("submit",function(n){n.preventDefault(),Form.submit_xhr(this)})),$form.bind("submit",function(){Form.clear_default_values($form)}),jQuery("input[alt],textarea[alt]",this).each(function(){$el=jQuery(this),Form.text_input_default_value[n]=$el.attr("alt"),$el.attr("type")=="password"?$el=Form.add_password_label($el.parent().get(0)):($el.val()==""&&$el.val($el.attr("alt")),$el.bind("focus",function(){Form.clear_default_text_input_value(this)}).bind("blur",function(){Form.restore_text_input_default_value(this)})),n++});if(jQuery(this).is("#Search")){var t=this,i=Form.swap_submit(t);i&&i.bind("click",function(){Form.do_quick_search(t)}),jQuery(t).bind("submit",function(){return Form.do_quick_search(t),!1})}jQuery(this).is("#AddPhoto")&&Form.init_add_folder(this),jQuery(".ResetForm").bind("click",Form.reset_form)})}},init_global_pre.add(Form.init),WoophyMap={main_map_id:"MapHome",search_container:null,expanded:!1,MainMap:null,expand:function(){var t=jQuery("#"+WoophyMap.main_map_id),n=jQuery("#MapInnerContainer"),s=jQuery("#MapContainer"),o=jQuery("#RightColumn"),e=jQuery("#MainColumn"),i=632,r=952,f=420,u=600;this.expanded?(n.animate({width:i+"px"},250,function(){t.css("width",i+"px")}),n.animate({height:f+"px"},250,function(){t.css("height",f+"px")}),s.animate({width:i+"px"},250,function(){e.css("overflow","hidden"),o.animate({"margin-top":"18px"},250)}),jQuery("#ExpandButton").removeClass("Expanded"),this.expanded=!1):(t.css("width",r+"px"),t.css("height",u+"px"),o.animate({"margin-top":u+141+"px"},250,function(){e.css("overflow","visible"),n.animate({width:r+"px"},250),n.animate({height:u+"px"},250),s.animate({width:r+"px"},250)}),jQuery("#ExpandButton").addClass("Expanded"),this.expanded=!0),WoophyMap.MainMap&&google&&google.maps.event.trigger(WoophyMap.MainMap.googlemap,"resize")},onGetCities:function(){},onGetPhotos:function(){Gallery&&Gallery.reset()},update:function(n){var r,t,i;$el=jQuery(n),r=$el.attr("rel");if(r){t=r.split(":"),i={};if(t.length==2)return i[t[0]]=t[1],WoophyMap.MainMap&&WoophyMap.MainMap.getCities(i),!1}return!0},init_map_links:function(n){jQuery("a.MapLink",n).bind("click",function(){return WoophyMap.update(this)})},init:function(){if(jQuery("#"+WoophyMap.main_map_id).length==1){WoophyMap.MainMap=new MapHome({map_id:WoophyMap.main_map_id,marker_image_dir:Page.root_url+"images/map_markers/",tooltip_id:"MarkerTooltip",service_url:Page.root_url+"services",photo_limit:9});jQuery(WoophyMap.MainMap).on(MapHome.events.MARKER_CLICK+" "+MapHome.events.GET_CITIES,function(){var t,n;Gallery.filters=this.urlencodeFilters(),this.getPhotos(0,Gallery.reset),t=this.getFilters();for(n in t)if(Search.setFilter(n,t[n]))break});jQuery("#ExpandButton").click(function(){return WoophyMap.expand(),!1}),WoophyMap.init_map_links(document.body)}}},init_global_pre.add(WoophyMap.init),Search={search_advanced:null,search_simple:null,advanced_open:!1,clear:function(){jQuery('input[name="SearchValue"]').val(""),WoophyMap.MainMap.getCities(null),Gallery.filters=null,Gallery.reset()},getFilter:function(){var n={};return n[jQuery('select[name="SearchKey"]').val()]=jQuery('input[name="SearchValue"]').val(),n},setFilter:function(n,t){var r=Search.getFilter(),i;if(r[n]==t)return!0;return i=jQuery('select[name="SearchKey"]').val(n),jQuery("option",i).filter(function(){return this.value===n}).length!==0?(jQuery('input[name="SearchValue"]').val(t),!0):!1},init:function(){jQuery("#SearchContainer").length>0&&(Search.search_container=jQuery("#SearchContainer"),jQuery('input[name="SearchSubmit"]',Search.search_container).bind("click",function(){return WoophyMap.MainMap.getCities(Search.getFilter()),!1}),jQuery('input[name="SearchClear"]',Search.search_container).bind("click",function(){Search.clear()}))}},init_global_pre.add(Search.init),Social={add_favorite:function(){var i=jQuery(this),n=i.attr("rel"),t=n.substring(n.indexOf("method=woophy.")+14,n.indexOf(".addToFavorites"));return jQuery.get(n,function(n){var r=jQuery("err",n),i="This "+t+" has been added to your favorites";r.length>0&&(i=r.attr("msg")),alert(i)}),!1},init_send_message:function(){Utils.ajax_link(jQuery("#SendMessageButton a")),jQuery("#SendMessageButton a").colorbox({scrolling:!1,transition:"fade",speed:100,onComplete:Social.on_open_send_message,width:459}),Form.props.SendMessageForm={method:"GET",callback:function(n){jQuery("#SendMessageForm").remove(),jQuery("<p>"+n.message+"</p>").appendTo("#SendMessage")}}},on_open_send_message:function(){jQuery("#CloseButton","#SendMessage").length==0&&jQuery('<div id="CloseButton" class="sprite replace">X</div>').prependTo("#colorbox #SendMessage").bind("click",function(){jQuery.colorbox.close()}),Page.init(),Form.init()},init:function(){jQuery("#AddFavorite a.enabled","#PinterestButton a").unbind("click"),Utils.hide_ajax_url(jQuery("#AddFavorite a.enabled")).bind("click",Social.add_favorite),jQuery("#PinterestButton a").bind("click",function(){var n=window.location.href,r=jQuery(this).attr("rel"),i=jQuery(this).attr("alt"),t="http://pinterest.com/pin/create/button/?url="+encodeURIComponent(n)+"&media="+encodeURIComponent(r)+"&description="+encodeURIComponent(i)+"&ref="+encodeURIComponent(n),u=window.open(t,"pinWin","width=600,height=260");return!1}),Social.init_send_message()}},init_global_pre.add(Social.init),Images={hide_missing:function(){$imgs=typeof arguments[0]=="string"?jQuery("img",arguments[0]):jQuery("img"),$imgs.error(function(){$this=jQuery(this),$this.css("visibility","hidden"),$this.parent().removeClass("ImageContainer")})},remove_flag_text:function(){jQuery(".sprite.flag").text("")},remove_award_text:function(){jQuery(".sprite.award").text("")}},init_global_pre.add(Images.remove_flag_text),init_global_pre.add(Images.remove_award_text),Ads={keywords:null,loadAdzerk:function(n,t,i){ados.run=ados.run||[],ados.run.push(function(){ados_add_placement(2559,17178,n,i).setZone(t),Ads.keywords!=null&&ados_setKeywords(Ads.keywords),ados_load()})},initAdzerk:function(){var i="http",r="static",n,t;document.location.protocol=="https:"&&(i+="s",r="engine"),n=document.createElement("script"),n.type="text/javascript",n.async=!0,n.src=i+"://"+r+".adzerk.net/ados.js",t=document.getElementsByTagName("script")[0],t.parentNode.insertBefore(n,t);switch(jQuery("body").attr("id")){case"HomePage":Ads.loadAdzerk("azk82889",6339,5);break;default:Ads.loadAdzerk("azk76744",6320,5)}}},init_global_pre.add(Ads.initAdzerk),Cookie={set:function(n,t,i){var r,u;i?(r=new Date,r.setTime(r.getTime()+i*864e5),u="; expires="+r.toGMTString()):u="",document.cookie=n+"="+t+u+"; path=/"},read:function(n){for(var u=n+"=",r=document.cookie.split(";"),t,i=0;i<r.length;i++){t=r[i];while(t.charAt(0)==" ")t=t.substring(1,t.length);if(t.indexOf(u)==0)return t.substring(u.length,t.length)}return null},erase:function(n){this.set(n,"",-1)}},Utils={hide_ajax_url:function(n){return n.each(function(){var n=jQuery(this),t=n.attr("href");n.attr("href","#"),n.attr("rel",t)}),n},ajax_link:function(n){var t=n.attr("href"),i;t&&t.indexOf("viewmode=1")==-1&&(i=t.indexOf("?")>-1?"&":"?",n.attr("href",t+i+"viewmode=1"))}},SelectList.prototype={setEnabled:function(n){if(this.enabled!=n){this.enabled=n;if(n){jQuery(document).on("mouseup",this.mouseUpEvent);jQuery(this.inputObj).on({keydown:this.keyDownEvent,keyup:this.keyUpEvent})}else jQuery(document).off("mouseup",this.mouseUpEvent),jQuery(this.inputObj).off({keydown:this.keyDownEvent,keyup:this.keyUpEvent})}},onKeyDownInput:function(n){var t=n.which||n.keyCode;t==13&&(this.selectedItemIndex>-1&&this.setInputValue(),this.hideList())},onKeyUpInput:function(n){var i=this.$holder.css("display")=="block",r=n.target||n.srcElement,t;if(r===this.inputObj){t=n.which||n.keyCode;if(this.listItems.length>0)switch(t){case 37:case 38:i&&this.selectedItemIndex>0&&this.setSelectedIndex(this.selectedItemIndex-1);break;case 39:case 40:i&&this.selectedItemIndex<this.listItems.length-1&&this.setSelectedIndex(this.selectedItemIndex+1);break;case 13:break;default:this.getList()}else this.getList()}},getList:function(){},onMouseOverItem:function(n){var t=jQuery(n.currentTarget).index();t>-1&&this.setSelectedIndex(t)},setInputValue:function(){this.listItems[this.selectedItemIndex]&&(this.inputObj.value=this.listItems[this.selectedItemIndex])},setSelectedIndex:function(n){if(this.selectedItemIndex!=n)if(n<this.listItems.length){var t=jQuery("tr",this.$holder);t[this.selectedItemIndex]&&(t[this.selectedItemIndex].className="inactive"),t[n]&&(t[n].className="active"),this.selectedItemIndex=n,this.setInputValue(),jQuery(this).trigger("selectItem",[this.listItems[n]?this.listItems[n]:null])}},positionList:function(){var n=jQuery(this.inputObj).offset();this.$holder.css({top:n.top+this.inputObj.offsetHeight-1+"px",left:n.left+"px"})},showList:function(){this.positionList(),this.$holder.show()},hideList:function(){this.$holder.hide()}},BaseArchive.prototype={getArchive:function(){jQuery.get(this.service_url+"&offset="+this.offset+"&limit="+this.limit+"&output_mode="+this.output_mode,jQuery.proxy(this.onGetArchive,this))},onGetArchive:function(){},pageBackward:function(){var n=Math.max(0,Math.min(this.offset,this.count_items)-this.limit);return n!=this.offset&&(this.offset=n,this.getArchive()),!1},pageForward:function(){var n=Math.max(0,this.offset+this.limit);return n<this.count_items&&(this.offset=n,this.getArchive()),!1},enablePageButtons:function(){this.enablePageButton(this.page_forward,this.offset+this.limit<this.count_items),this.enablePageButton(this.page_backward,this.offset>0)},enablePageButton:function(n,t){var i=jQuery(n);t?i.removeClass("inactive"):i.addClass("inactive")}},jQuery(document).ready(function(){init_global_pre.fire()}),jQuery(window).load(function(){init_global_post.fire()}),function(n,t,i){function u(i,r,u){var f=t.createElement(i);return r&&(f.id=h+r),u&&(f.style.cssText=u),n(f)}function bt(n){var i=c.length,t=(y+n)%i;return t<0?i+t:t}function v(n,t){return Math.round((/%/.test(n)?(t==="x"?a.width():a.height())/100:1)*parseInt(n,10))}function pi(n){return r.photo||/\.(gif|png|jpe?g|bmp|ico)((#|\?).*)?$/i.test(n)}function ci(){var t,i=n.data(p,g);i==null?(r=n.extend({},ri),console&&console.log&&console.log("Error: cboxElement missing settings object")):r=n.extend({},i);for(t in r)n.isFunction(r[t])&&t.slice(0,2)!=="on"&&(r[t]=r[t].call(p));r.rel=r.rel||p.rel||"nofollow",r.href=r.href||n(p).attr("href"),r.title=r.title||p.title,typeof r.href=="string"&&(r.href=n.trim(r.href))}function rt(t,i){n.event.trigger(t),i&&i.call(p)}function ki(){var i,n=h+"Slideshow_",t="click."+h,e,u,s;r.slideshow&&c[1]?(e=function(){et.text(r.slideshowStop).unbind(t).bind(ii,function(){(r.loop||c[y+1])&&(i=setTimeout(f.next,r.slideshowSpeed))}).bind(ti,function(){clearTimeout(i)}).one(t+" "+yt,u);o.removeClass(n+"off").addClass(n+"on"),i=setTimeout(f.next,r.slideshowSpeed)},u=function(){clearTimeout(i);et.text(r.slideshowStart).unbind([ii,ti,yt,t].join(" ")).one(t,function(){f.next(),e()});o.removeClass(n+"on").addClass(n+"off")},r.slideshowAuto?e():u()):o.removeClass(n+"off "+n+"on")}function ai(t){if(!vt){p=t,ci(),c=n(p),y=0,r.rel!=="nofollow"&&(c=n("."+ht).filter(function(){var i=n.data(this,g),t;return i&&(t=i.rel||this.rel),t===r.rel}),y=c.index(p),y===-1&&(c=c.add(p),y=c.length-1));if(!k){k=st=!0,o.show();if(r.returnFocus)n(p).blur().one(yi,function(){n(this).focus()});it.css({opacity:+r.opacity,cursor:r.overlayClose?"pointer":"auto"}).show(),r.w=v(r.initialWidth,"x"),r.h=v(r.initialHeight,"y"),f.position(),lt&&a.bind("resize."+pt+" scroll."+pt,function(){it.css({width:a.width(),height:a.height(),top:a.scrollTop(),left:a.scrollLeft()})}).trigger("resize."+pt),rt(wi,r.onOpen),ei.add(oi).hide(),fi.html(r.close).show()}f.load(!0)}}function li(){!o&&t.body&&(kt=!1,a=n(i),o=u(e).attr({id:g,"class":ct?h+(lt?"IE6":"IE"):""}).hide(),it=u(e,"Overlay",lt?"position:absolute":"").hide(),ut=u(e,"Wrapper"),d=u(e,"Content").append(l=u(e,"LoadedContent","width:0; height:0; overflow:hidden"),hi=u(e,"LoadingOverlay").add(u(e,"LoadingGraphic")),oi=u(e,"Title"),ui=u(e,"Current"),ft=u(e,"Next"),ot=u(e,"Previous"),et=u(e,"Slideshow").bind(wi,ki),fi=u(e,"Close")),ut.append(u(e).append(u(e,"TopLeft"),dt=u(e,"TopCenter"),u(e,"TopRight")),u(e,!1,"clear:left").append(gt=u(e,"MiddleLeft"),d,ni=u(e,"MiddleRight")),u(e,!1,"clear:left").append(u(e,"BottomLeft"),si=u(e,"BottomCenter"),u(e,"BottomRight"))).find("div div").css({float:"left"}),at=u(e,!1,"position:absolute; width:9999px; visibility:hidden; display:none"),ei=ft.add(ot).add(ui).add(et),n(t.body).append(it,o.append(ut,at)))}function bi(){return o?(kt||(kt=!0,nt=dt.height()+si.height()+d.outerHeight(!0)-d.height(),tt=gt.width()+ni.width()+d.outerWidth(!0)-d.width(),w=l.outerHeight(!0),b=l.outerWidth(!0),o.css({"padding-bottom":nt,"padding-right":tt}),ft.click(function(){f.next()}),ot.click(function(){f.prev()}),fi.click(function(){f.close()}),it.click(function(){r.overlayClose&&f.close()}),n(t).bind("keydown."+h,function(n){var t=n.keyCode;k&&r.escKey&&t===27&&(n.preventDefault(),f.close()),k&&r.arrowKey&&c[1]&&(t===37?(n.preventDefault(),ot.click()):t===39&&(n.preventDefault(),ft.click()))}),n("."+ht,t).live("click",function(n){n.which>1||n.shiftKey||n.altKey||n.metaKey||(n.preventDefault(),ai(this))})),!0):!1}var ri={transition:"elastic",speed:300,width:!1,initialWidth:"600",innerWidth:!1,maxWidth:!1,height:!1,initialHeight:"450",innerHeight:!1,maxHeight:!1,scalePhotos:!0,scrolling:!0,inline:!1,html:!1,iframe:!1,fastIframe:!0,photo:!1,href:!1,title:!1,rel:!1,opacity:.9,preloading:!0,current:"image {current} of {total}",previous:"previous",next:"next",close:"close",xhrError:"This content failed to load.",imgError:"This image failed to load.",open:!1,returnFocus:!0,reposition:!0,loop:!0,slideshow:!1,slideshowAuto:!0,slideshowSpeed:2500,slideshowStart:"start slideshow",slideshowStop:"stop slideshow",onOpen:!1,onLoad:!1,onComplete:!1,onCleanup:!1,onClosed:!1,overlayClose:!0,escKey:!0,arrowKey:!0,top:!1,bottom:!1,left:!1,right:!1,fixed:!1,data:undefined},g="colorbox",h="cbox",ht=h+"Element",wi=h+"_open",ti=h+"_load",ii=h+"_complete",yt=h+"_cleanup",yi=h+"_closed",wt=h+"_purge",ct=!n.support.opacity&&!n.support.style,lt=ct&&!i.XMLHttpRequest,pt=h+"_IE6",it,o,ut,d,dt,gt,ni,si,c,a,l,at,hi,oi,ui,et,ft,ot,fi,ei,r,nt,tt,w,b,p,y,s,k,st,vt,vi,f,e="div",kt;if(n.colorbox)return;n(li),f=n.fn[g]=n[g]=function(t,i){var r=this;t=t||{},li();if(bi()){if(!r[0]){if(r.selector)return r;r=n("<a/>"),t.open=!0}i&&(t.onComplete=i),r.each(function(){n.data(this,g,n.extend({},n.data(this,g)||ri,t))}).addClass(ht),(n.isFunction(t.open)&&t.open.call(r)||t.open)&&ai(r[0])}return r},f.position=function(n,t){function l(n){dt[0].style.width=si[0].style.width=d[0].style.width=n.style.width,d[0].style.height=gt[0].style.height=ni[0].style.height=n.style.height}var u=0,i=0,e=o.offset(),c,s;a.unbind("resize."+h),o.css({top:-9e4,left:-9e4}),c=a.scrollTop(),s=a.scrollLeft(),r.fixed&&!lt?(e.top-=c,e.left-=s,o.css({position:"fixed"})):(u=c,i=s,o.css({position:"absolute"})),i+=r.right!==!1?Math.max(a.width()-r.w-b-tt-v(r.right,"x"),0):r.left!==!1?v(r.left,"x"):Math.round(Math.max(a.width()-r.w-b-tt,0)/2),u+=r.bottom!==!1?Math.max(a.height()-r.h-w-nt-v(r.bottom,"y"),0):r.top!==!1?v(r.top,"y"):Math.round(Math.max(a.height()-r.h-w-nt,0)/2),o.css({top:e.top,left:e.left}),n=o.width()===r.w+b&&o.height()===r.h+w?0:n||0,ut[0].style.width=ut[0].style.height="9999px",o.dequeue().animate({width:r.w+b,height:r.h+w,top:u,left:i},{duration:n,complete:function(){l(this),st=!1,ut[0].style.width=r.w+b+tt+"px",ut[0].style.height=r.h+w+nt+"px",r.reposition&&setTimeout(function(){a.bind("resize."+h,f.position)},1),t&&t()},step:function(){l(this)}})},f.resize=function(n){k&&(n=n||{},n.width&&(r.w=v(n.width,"x")-b-tt),n.innerWidth&&(r.w=v(n.innerWidth,"x")),l.css({width:r.w}),n.height&&(r.h=v(n.height,"y")-w-nt),n.innerHeight&&(r.h=v(n.innerHeight,"y")),n.innerHeight||n.height||(l.css({height:"auto"}),r.h=l.height()),l.css({height:r.h}),f.position(r.transition==="none"?0:r.speed))},f.prep=function(t){function p(){return r.w=r.w||l.width(),r.w=r.mw&&r.mw<r.w?r.mw:r.w}function v(){return r.h=r.h||l.height(),r.h=r.mh&&r.mh<r.h?r.mh:r.h}if(!k)return;var a,i=r.transition==="none"?0:r.speed;l.remove(),l=u(e,"LoadedContent").append(t),l.hide().appendTo(at.show()).css({width:p(),overflow:r.scrolling?"auto":"hidden"}).css({height:v()}).prependTo(d),at.hide(),n(s).css({float:"none"});if(lt)n("select").not(o.find("select")).filter(function(){return this.style.visibility!=="hidden"}).css({visibility:"hidden"}).one(yt,function(){this.style.visibility="inherit"});a=function(){function w(){ct&&o[0].style.removeAttribute("filter")}var d,a,p=c.length,t,nt="frameBorder",tt="allowTransparency",e,f,b,v;if(!k)return;e=function(){clearTimeout(vi),hi.hide(),rt(ii,r.onComplete)},ct&&s&&l.fadeIn(100),oi.html(r.title).add(l).show();if(p>1){typeof r.current=="string"&&ui.html(r.current.replace("{current}",y+1).replace("{total}",p)).show(),ft[r.loop||y<p-1?"show":"hide"]().html(r.next),ot[r.loop||y?"show":"hide"]().html(r.previous),r.slideshow&&et.show();if(r.preloading){d=[bt(-1),bt(1)];while(a=c[d.pop()])v=n.data(a,g),v&&v.href?(f=v.href,n.isFunction(f)&&(f=f.call(a))):f=a.href,pi(f)&&(b=new Image,b.src=f)}}else ei.hide();if(r.iframe){t=u("iframe")[0],nt in t&&(t[nt]=0),tt in t&&(t[tt]="true"),t.name=h+ +new Date;if(r.fastIframe)e();else n(t).one("load",e);t.src=r.href,r.scrolling||(t.scrolling="no");n(t).addClass(h+"Iframe").appendTo(l).one(wt,function(){t.src="//about:blank"})}else e();r.transition==="fade"?o.fadeTo(i,1,w):w()},r.transition==="fade"?o.fadeTo(i,0,function(){f.position(0,a)}):f.position(i,a)},f.load=function(t){var i,a,o=f.prep;st=!0,s=!1,p=c[y],t||ci(),rt(wt),rt(ti,r.onLoad),r.h=r.height?v(r.height,"y")-w-nt:r.innerHeight&&v(r.innerHeight,"y"),r.w=r.width?v(r.width,"x")-b-tt:r.innerWidth&&v(r.innerWidth,"x"),r.mw=r.w,r.mh=r.h,r.maxWidth&&(r.mw=v(r.maxWidth,"x")-b-tt,r.mw=r.w&&r.w<r.mw?r.w:r.mw),r.maxHeight&&(r.mh=v(r.maxHeight,"y")-w-nt,r.mh=r.h&&r.h<r.mh?r.h:r.mh),i=r.href,vi=setTimeout(function(){hi.show()},100);if(r.inline){u(e).hide().insertBefore(n(i)[0]).one(wt,function(){n(this).replaceWith(l.children())});o(n(i))}else r.iframe?o(" "):r.html?o(r.html):pi(i)?(n(s=new Image).addClass(h+"Photo").error(function(){r.title=!1,o(u(e,"Error").html(r.imgError))}).load(function(){var n;s.onload=null,r.scalePhotos&&(a=function(){s.height-=s.height*n,s.width-=s.width*n},r.mw&&s.width>r.mw&&(n=(s.width-r.mw)/s.width,a()),r.mh&&s.height>r.mh&&(n=(s.height-r.mh)/s.height,a())),r.h&&(s.style.marginTop=Math.max(r.h-s.height,0)/2+"px"),c[1]&&(r.loop||c[y+1])&&(s.style.cursor="pointer",s.onclick=function(){f.next()}),ct&&(s.style.msInterpolationMode="bicubic"),setTimeout(function(){o(s)},1)}),setTimeout(function(){s.src=i},1)):i&&at.load(i,r.data,function(t,i){o(i==="error"?u(e,"Error").html(r.xhrError):n(this).contents())})},f.next=function(){!st&&c[1]&&(r.loop||c[y+1])&&(y=bt(1),f.load())},f.prev=function(){!st&&c[1]&&(r.loop||y)&&(y=bt(-1),f.load())},f.close=function(){k&&!vt&&(vt=!0,k=!1,rt(yt,r.onCleanup),a.unbind("."+h+" ."+pt),it.fadeTo(200,0),o.stop().fadeTo(300,0,function(){o.add(it).css({opacity:1,cursor:"auto"}).hide(),rt(wt),l.remove(),setTimeout(function(){vt=!1,rt(yi,r.onClosed)},1)}))},f.remove=function(){n([]).add(o).add(it).remove(),o=null,n("."+ht).removeData(g).removeClass(ht).die()},f.element=function(){return n(p)},f.settings=ri}(jQuery,document,this),Map={style:[{elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"poi",elementType:"geometry",stylers:[{visibility:"off"}]},{featureType:"transit",elementType:"geometry",stylers:[{visibility:"off"}]},{featureType:"water",stylers:[{visibility:"simplified"},{lightness:100}]},{featureType:"landscape",elementType:"geometry",stylers:[{visibility:"on"},{hue:"#55ff00"},{saturation:52},{lightness:-59}]},{featureType:"road",elementType:"geometry",stylers:[{visibility:"off"}]},{featureType:"road.local",elementType:"geometry",stylers:[{hue:"#5eff00"},{visibility:"simplified"},{lightness:-55},{saturation:30}]},{featureType:"road.arterial",elementType:"geometry",stylers:[{hue:"#5eff00"},{lightness:-38},{visibility:"simplified"},{saturation:-59}]},{featureType:"administrative",stylers:[{visibility:"off"},{hue:"#33ff00"},{saturation:40},{lightness:-55}]},{featureType:"administrative.country",stylers:[{visibility:"simplified"},{hue:"#33ff00"},{lightness:14},{saturation:22}]}],markerShape:{type:"circle",coords:[9,9,7]},markerSize:new google.maps.Size(18,18),markerOrigin:new google.maps.Point(0,0),markerAnchor:new google.maps.Point(9,9)},MarkerTooltip.prototype=new google.maps.OverlayView,MarkerTooltip.prototype.onAdd=function(){},MarkerTooltip.prototype.onRemove=function(){var n=this.get("element");n&&n.parentNode.removeChild(this.div_)},MarkerTooltip.prototype.draw=function(n){var t;if(n==undefined)return;t=this.get("element");if(t){var f=n.n+",<br/>"+n.c,i=parseInt(n.q)||0,u=i+" photo"+(i==1?"":"s"),r="url("+n.url+")";jQuery("#tt_location",t).html(f),jQuery("#tt_quantity",t).html(u),jQuery("#tt_thumb",t).css("background-image",r)}},MarkerTooltip.prototype.hide=function(){var n=this.get("element");n&&jQuery(n).hide()},MarkerTooltip.prototype.show=function(){var e=this.get("element"),i,r,f;if(e){var u=jQuery(e),t=10,n=this.getProjection().fromLatLngToContainerPixel(this.get("position")),o=jQuery(this.getMap().getDiv()).offset();n.y+=o.top,n.x+=o.left,i=n.y-u.height()-t,i<t&&(i=n.y+t),r=n.x+t,f=u.width(),r+f+t>jQuery(document).width()&&(r=n.x-f),u.css({left:r+"px",top:i+"px"}),u.show()}},MapHome.events={MARKER_CLICK:"marker_click",GET_CITIES:"get_cities"},MapHome.filterKeys={KEYWORDS:"keywords",CITY:"city",USERNAME:"username",PHOTOID:"photoid",LAST24H:"last24H",CITYID:"cityid",USERID:"userid",TRAVELBLOG:"travelblog",TOOLTIP:"tooltip",SHOWALL:"showall",LIMIT:"limit"},MapHome.historyKeys={LATITUDE:"lat",LONGITUDE:"lng",MAGNITUDE:"mag",FILTERKEY:"key",FILTERVALUE:"val",OFFSET:"lmt"}